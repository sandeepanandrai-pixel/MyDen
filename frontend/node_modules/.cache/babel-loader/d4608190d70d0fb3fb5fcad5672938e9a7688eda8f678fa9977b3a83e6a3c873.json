{"ast":null,"code":"import axios from 'axios';\nconst COINGECKO_API_URL = 'https://api.coingecko.com/api/v3';\nconst CACHE_DURATION = 60000; // 1 minute\nlet cachedData = null;\nlet lastFetchTime = 0;\nexport const getMarketData = async (forceRefresh = false) => {\n  // Return cached data if available and fresh\n  const now = Date.now();\n  if (!forceRefresh && cachedData && now - lastFetchTime < CACHE_DURATION) {\n    console.log('Using cached market data');\n    return cachedData;\n  }\n  try {\n    const response = await axios.get(`${COINGECKO_API_URL}/coins/markets`, {\n      params: {\n        vs_currency: 'usd',\n        ids: 'bitcoin,ethereum,solana,cardano,ripple,polkadot,dogecoin,avalanche-2,chainlink,matic-network',\n        order: 'market_cap_desc',\n        per_page: 10,\n        page: 1,\n        sparkline: false\n      }\n    });\n\n    // Update cache\n    cachedData = response.data;\n    lastFetchTime = now;\n    return response.data;\n  } catch (error) {\n    console.error(\"Error fetching market data, using fallback:\", error);\n\n    // Return cached data if available, even if expired\n    if (cachedData) {\n      console.log('Using stale cached data due to API error');\n      return cachedData;\n    }\n\n    // Fallback mock data\n    const fallbackData = [{\n      id: 'bitcoin',\n      symbol: 'btc',\n      name: 'Bitcoin',\n      current_price: 65000,\n      price_change_24h: 1200,\n      price_change_percentage_24h: 1.8\n    }, {\n      id: 'ethereum',\n      symbol: 'eth',\n      name: 'Ethereum',\n      current_price: 3500,\n      price_change_24h: -50,\n      price_change_percentage_24h: -1.4\n    }, {\n      id: 'solana',\n      symbol: 'sol',\n      name: 'Solana',\n      current_price: 145,\n      price_change_24h: 5,\n      price_change_percentage_24h: 3.5\n    }, {\n      id: 'cardano',\n      symbol: 'ada',\n      name: 'Cardano',\n      current_price: 0.45,\n      price_change_24h: 0.01,\n      price_change_percentage_24h: 2.2\n    }, {\n      id: 'ripple',\n      symbol: 'xrp',\n      name: 'XRP',\n      current_price: 0.60,\n      price_change_24h: -0.02,\n      price_change_percentage_24h: -3.0\n    }];\n    cachedData = fallbackData;\n    lastFetchTime = now;\n    return fallbackData;\n  }\n};","map":{"version":3,"names":["axios","COINGECKO_API_URL","CACHE_DURATION","cachedData","lastFetchTime","getMarketData","forceRefresh","now","Date","console","log","response","get","params","vs_currency","ids","order","per_page","page","sparkline","data","error","fallbackData","id","symbol","name","current_price","price_change_24h","price_change_percentage_24h"],"sources":["C:/projects/MyDen/my-fullstack-app/frontend/src/services/marketData.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst COINGECKO_API_URL = 'https://api.coingecko.com/api/v3';\r\nconst CACHE_DURATION = 60000; // 1 minute\r\nlet cachedData = null;\r\nlet lastFetchTime = 0;\r\n\r\nexport const getMarketData = async (forceRefresh = false) => {\r\n    // Return cached data if available and fresh\r\n    const now = Date.now();\r\n    if (!forceRefresh && cachedData && (now - lastFetchTime) < CACHE_DURATION) {\r\n        console.log('Using cached market data');\r\n        return cachedData;\r\n    }\r\n\r\n    try {\r\n        const response = await axios.get(`${COINGECKO_API_URL}/coins/markets`, {\r\n            params: {\r\n                vs_currency: 'usd',\r\n                ids: 'bitcoin,ethereum,solana,cardano,ripple,polkadot,dogecoin,avalanche-2,chainlink,matic-network',\r\n                order: 'market_cap_desc',\r\n                per_page: 10,\r\n                page: 1,\r\n                sparkline: false\r\n            }\r\n        });\r\n\r\n        // Update cache\r\n        cachedData = response.data;\r\n        lastFetchTime = now;\r\n\r\n        return response.data;\r\n    } catch (error) {\r\n        console.error(\"Error fetching market data, using fallback:\", error);\r\n\r\n        // Return cached data if available, even if expired\r\n        if (cachedData) {\r\n            console.log('Using stale cached data due to API error');\r\n            return cachedData;\r\n        }\r\n\r\n        // Fallback mock data\r\n        const fallbackData = [\r\n            { id: 'bitcoin', symbol: 'btc', name: 'Bitcoin', current_price: 65000, price_change_24h: 1200, price_change_percentage_24h: 1.8 },\r\n            { id: 'ethereum', symbol: 'eth', name: 'Ethereum', current_price: 3500, price_change_24h: -50, price_change_percentage_24h: -1.4 },\r\n            { id: 'solana', symbol: 'sol', name: 'Solana', current_price: 145, price_change_24h: 5, price_change_percentage_24h: 3.5 },\r\n            { id: 'cardano', symbol: 'ada', name: 'Cardano', current_price: 0.45, price_change_24h: 0.01, price_change_percentage_24h: 2.2 },\r\n            { id: 'ripple', symbol: 'xrp', name: 'XRP', current_price: 0.60, price_change_24h: -0.02, price_change_percentage_24h: -3.0 }\r\n        ];\r\n\r\n        cachedData = fallbackData;\r\n        lastFetchTime = now;\r\n\r\n        return fallbackData;\r\n    }\r\n};\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,iBAAiB,GAAG,kCAAkC;AAC5D,MAAMC,cAAc,GAAG,KAAK,CAAC,CAAC;AAC9B,IAAIC,UAAU,GAAG,IAAI;AACrB,IAAIC,aAAa,GAAG,CAAC;AAErB,OAAO,MAAMC,aAAa,GAAG,MAAAA,CAAOC,YAAY,GAAG,KAAK,KAAK;EACzD;EACA,MAAMC,GAAG,GAAGC,IAAI,CAACD,GAAG,CAAC,CAAC;EACtB,IAAI,CAACD,YAAY,IAAIH,UAAU,IAAKI,GAAG,GAAGH,aAAa,GAAIF,cAAc,EAAE;IACvEO,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAC;IACvC,OAAOP,UAAU;EACrB;EAEA,IAAI;IACA,MAAMQ,QAAQ,GAAG,MAAMX,KAAK,CAACY,GAAG,CAAC,GAAGX,iBAAiB,gBAAgB,EAAE;MACnEY,MAAM,EAAE;QACJC,WAAW,EAAE,KAAK;QAClBC,GAAG,EAAE,8FAA8F;QACnGC,KAAK,EAAE,iBAAiB;QACxBC,QAAQ,EAAE,EAAE;QACZC,IAAI,EAAE,CAAC;QACPC,SAAS,EAAE;MACf;IACJ,CAAC,CAAC;;IAEF;IACAhB,UAAU,GAAGQ,QAAQ,CAACS,IAAI;IAC1BhB,aAAa,GAAGG,GAAG;IAEnB,OAAOI,QAAQ,CAACS,IAAI;EACxB,CAAC,CAAC,OAAOC,KAAK,EAAE;IACZZ,OAAO,CAACY,KAAK,CAAC,6CAA6C,EAAEA,KAAK,CAAC;;IAEnE;IACA,IAAIlB,UAAU,EAAE;MACZM,OAAO,CAACC,GAAG,CAAC,0CAA0C,CAAC;MACvD,OAAOP,UAAU;IACrB;;IAEA;IACA,MAAMmB,YAAY,GAAG,CACjB;MAAEC,EAAE,EAAE,SAAS;MAAEC,MAAM,EAAE,KAAK;MAAEC,IAAI,EAAE,SAAS;MAAEC,aAAa,EAAE,KAAK;MAAEC,gBAAgB,EAAE,IAAI;MAAEC,2BAA2B,EAAE;IAAI,CAAC,EACjI;MAAEL,EAAE,EAAE,UAAU;MAAEC,MAAM,EAAE,KAAK;MAAEC,IAAI,EAAE,UAAU;MAAEC,aAAa,EAAE,IAAI;MAAEC,gBAAgB,EAAE,CAAC,EAAE;MAAEC,2BAA2B,EAAE,CAAC;IAAI,CAAC,EAClI;MAAEL,EAAE,EAAE,QAAQ;MAAEC,MAAM,EAAE,KAAK;MAAEC,IAAI,EAAE,QAAQ;MAAEC,aAAa,EAAE,GAAG;MAAEC,gBAAgB,EAAE,CAAC;MAAEC,2BAA2B,EAAE;IAAI,CAAC,EAC1H;MAAEL,EAAE,EAAE,SAAS;MAAEC,MAAM,EAAE,KAAK;MAAEC,IAAI,EAAE,SAAS;MAAEC,aAAa,EAAE,IAAI;MAAEC,gBAAgB,EAAE,IAAI;MAAEC,2BAA2B,EAAE;IAAI,CAAC,EAChI;MAAEL,EAAE,EAAE,QAAQ;MAAEC,MAAM,EAAE,KAAK;MAAEC,IAAI,EAAE,KAAK;MAAEC,aAAa,EAAE,IAAI;MAAEC,gBAAgB,EAAE,CAAC,IAAI;MAAEC,2BAA2B,EAAE,CAAC;IAAI,CAAC,CAChI;IAEDzB,UAAU,GAAGmB,YAAY;IACzBlB,aAAa,GAAGG,GAAG;IAEnB,OAAOe,YAAY;EACvB;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}